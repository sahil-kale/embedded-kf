# Generated C Kalman Filter Code

This directory contains C code generated by the Kalman filter generation tool available at [https://github.com/sahil-kale/embedded-kf](https://github.com/sahil-kale/embedded-kf).

## Overview

The generated code provides an implementation of a Kalman Filter that can be integrated into your embedded system to estimate the state of a dynamic system based on a series of noisy measurements. The code includes functions for initialization, state prediction, and state update based on sensor measurements.

## Usage Instructions

1. **Include the Generated Files**
   - Add the `.c` and `.h` files from this directory to your project and build them along with the rest of your application.

2. **Kalman Filter Initialization**
   - On startup, call the filter's initialization function (e.g., `imu_kf_init()`) once. Ensure that the function completes without errors.

3. **Prediction Step**
   - To predict the system's state and covariance, call the **predict** function (e.g., `imu_kf_predict()`). If the filter uses a control vector, populate the control input struct as required.

4. **Update Step**
   - After receiving new sensor measurements, call the **update** function (e.g., `imu_kf_update()`). This updates the state and covariance based on the provided measurement data.
   
   - **Note**: You must supply both the measurement data and its validity in the input struct. The filter supports asynchronous measurements, allowing the exclusion of invalid measurements by marking their validity as `false`. In such cases, the sensor transition matrix is updated accordingly.

## Example

For an IMU-based Kalman filter:

- Call `imu_kf_init()` once during startup.
- Use `imu_kf_predict()` during each iteration where a state prediction is required.
- Call `imu_kf_update()` with the measurement struct populated whenever sensor data is available.

## Additional Notes

- This implementation supports asynchronous sensor measurements, meaning that sensors with varying sampling rates can still be incorporated into the Kalman filter without issues.
- Ensure the update function is called at a regular, fixed-period interval for optimial results
- Make sure to handle errors returned by the initialization, prediction, and update functions to ensure robustness in your application.
